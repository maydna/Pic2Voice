(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,a,t){e.exports=t.p+"static/media/linkedin.14f7b675.svg"},129:function(e,a,t){e.exports=t.p+"static/media/github.76d344f0.svg"},138:function(e,a,t){e.exports=t(284)},143:function(e,a,t){},264:function(e,a,t){},284:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),i=t(29),o=t.n(i),r=(t(143),t(30)),l=t(31),c=t(35),m=t(32),u=t(36),d=t(294),p=function(e){var a=e.onRouteChange;return"home"===e.route?s.a.createElement("div",null,s.a.createElement(d.a,{compact:!0,style:{display:"flex",justifyContent:"flex-end"}},s.a.createElement(d.a.Item,{position:"left",className:"f4"},"Picture2Audio"),s.a.createElement(d.a.Item,{position:"right",onClick:function(){return window.location.assign("https://thisisadamyang.com")}},"Who Built This?"),s.a.createElement(d.a.Item,{onClick:function(){return a("signin")}},"Sign Out"))):s.a.createElement("div",null,s.a.createElement(d.a,{compact:!0,style:{display:"flex",justifyContent:"flex-end"}},s.a.createElement(d.a.Item,{header:!0,position:"left",className:"f4"},"Picture2Audio"),s.a.createElement(d.a.Item,{position:"right",onClick:function(){return window.location.assign("https://thisisadamyang.com")}},"Who Built This?"),s.a.createElement(d.a.Item,{onClick:function(){return a("signin")}},"Sign In")))},h=(t(264),t(266),t(57)),g=t.n(h),f=t(285),E=t(291),w=function(e){e.name,e.entries,e.isSignedIn;return s.a.createElement("div",null,s.a.createElement("div",{className:"logolayout"},s.a.createElement("p",{className:"logo f5"},"This website can convert an image into a voice message. Create an account and give it a try!"),s.a.createElement(f.a,{src:g.a,size:"large"})),s.a.createElement(E.a,null))},b=function(e){var a=e.name,t=e.entries;e.isSignedIn;return s.a.createElement("div",null,s.a.createElement("div",{className:"logolayout"},s.a.createElement("p",{className:"logo f5"},s.a.createElement("p",{className:"f3"},"Hey ".concat(a,"!")),"You have converted ".concat(t," images already!"),s.a.createElement("p",{className:"f5"},"Thanks for your support on this website!")),s.a.createElement(f.a,{src:g.a,size:"large"})),s.a.createElement(E.a,null))},y=t(293),v=t(292),N=function(e){var a=e.onInputChange,t=e.onSubmit;return s.a.createElement("div",{className:"lowerBox"},s.a.createElement(v.a,{className:"link pad",type:"text",placeholder:"Paste your link here",onChange:a}),s.a.createElement(y.a,{primary:!0,className:"f4 link",onClick:t},"Convert!"))},C=function(e){var a=e.imageURL;return""===a?s.a.createElement("div",{className:"box center"},s.a.createElement("img",{alt:"Semantic UI is unavailable",src:"https://react.semantic-ui.com/images/wireframe/image.png",width:"auto",height:"220px"})):s.a.createElement("div",{className:"box center"},s.a.createElement("img",{alt:"Unavailable",src:a,width:"auto",height:"220px"}))},S=t(296),k=t(295),j=t(116),I=function(e){e.imageURL;var a=e.keywords;return s.a.createElement("div",{className:"box center"},s.a.createElement(S.a,{className:"word"},s.a.createElement(k.a,{as:"h3"},"Keywords in this image"),a.map(function(e){return s.a.createElement(j.a,{className:"pad2",color:"blue",as:"a",key:e},e)})))},R=function(e){e.imageURL;var a=e.audioURL;return s.a.createElement("div",{className:"center ma"},s.a.createElement("audio",{src:a,controls:!0,autoPlay:!0}))},U=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).onEmailChange=function(e){t.setState({signInEmail:e.target.value})},t.onPasswordChange=function(e){t.setState({signInPassword:e.target.value})},t.onSubmitSignIn=function(){fetch("https://"+window.location.hostname+"/api/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.state.signInEmail,password:t.state.signInPassword})}).then(function(e){return e.json()}).then(function(e){e.id?(t.props.loadUser(e),t.props.onRouteChange("home")):alert("Sign in failed, please check your email and password and try again!")})},t.state={signInEmail:"",signInPassword:""},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props.onRouteChange;return s.a.createElement("article",{className:"br2 ba dark-gray b--black-10 mv4 w-100 w-50-m w-25-l mw5 center"},s.a.createElement("main",{className:"pa4 black-80"},s.a.createElement("div",{className:"measure"},s.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},s.a.createElement("legend",{className:"f4 fw6 ph0 mh0"},"Sign In"),s.a.createElement("div",{className:"mt3"},s.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address"},"Email"),s.a.createElement("input",{className:"pa2 input-reset ba bg-transparent w-100",type:"email",name:"email-address",id:"email-address",onChange:this.onEmailChange})),s.a.createElement("div",{className:"mv3"},s.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"password"},"Password"),s.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent w-100",type:"password",name:"password",id:"password",onChange:this.onPasswordChange}))),s.a.createElement("div",{className:""},s.a.createElement("input",{onClick:this.onSubmitSignIn,className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Sign in"})),s.a.createElement("div",{className:"lh-copy mt3"},s.a.createElement("p",{onClick:function(){return e("signup")},className:"f6 link dim black db pointer"},"Or Sign Up Here!")))))}}]),a}(s.a.Component),O=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).onEmailChange=function(e){t.setState({email:e.target.value})},t.onPasswordChange=function(e){t.setState({password:e.target.value})},t.onNameChange=function(e){t.setState({name:e.target.value})},t.onSubmitSignUp=function(){t.state.password.length<5?alert("Hey! Please check if the password you entered has more than 5 characters"):!1===/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.state.email)?alert("Hey! Please check the email you entered is valid"):t.state.name.length<1?alert("Hey! Please enter a name"):fetch("https://"+window.location.hostname+"/api/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.state.email,password:t.state.password,name:t.state.name})}).then(function(e){return e.json()}).then(function(e){e.id?(t.props.loadUser(e),t.props.onRouteChange("home")):alert("Hey! You have already signed up for an account, please sign in directly")})},t.state={email:"",password:"",name:""},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("article",{className:"br2 ba dark-gray b--black-10 mv4 w-100 w-50-m w-25-l mw5 center"},s.a.createElement("main",{className:"pa4 black-80"},s.a.createElement("div",{className:"measure"},s.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},s.a.createElement("legend",{className:"f4 fw6 ph0 mh0"},"Creat An Account Now!"),s.a.createElement("div",{className:"mt3"},s.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"name"},"Name"),s.a.createElement("input",{className:"pa2 input-reset ba bg-transparent w-100",type:"text",name:"name",id:"name",onChange:this.onNameChange})),s.a.createElement("div",{className:"mt3"},s.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address"},"Email"),s.a.createElement("input",{className:"pa2 input-reset ba bg-transparent w-100",type:"email",name:"email-address",id:"email-address",onChange:this.onEmailChange})),s.a.createElement("div",{className:"mv3"},s.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"password"},"Password"),s.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent w-100",type:"password",name:"password",id:"password",onChange:this.onPasswordChange}))),s.a.createElement("div",{className:""},s.a.createElement("input",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Sign up and Go!",onClick:this.onSubmitSignUp})))))}}]),a}(s.a.Component),L=t(128),P=t.n(L),x=t(129),T=t.n(x),A=function(){return s.a.createElement("div",{className:"footer"},s.a.createElement("p",{style:{fontSize:"10px"}},"Ver 1.0:",s.a.createElement("div",null,"- The voice message can only describe what elements are in the image."),s.a.createElement("div",null,"- Image uploading is not supported.")),s.a.createElement("div",null,s.a.createElement(j.a,{as:"a",href:"https://www.linkedin.com/in/mingwu-yang/"},s.a.createElement(f.a,{avatar:!0,spaced:"right",src:P.a}),"My LinkedIn"),s.a.createElement(j.a,{as:"a",href:"https://github.com/maydna/Pic2Voice"},s.a.createElement(f.a,{avatar:!0,spaced:"right",src:T.a}),"View Repo")))},z=(t(281),{input:"",imageURL:"",route:"signin",isSignedIn:!1,keywords:[],audioURL:"",user:{id:"",name:"",email:"",password:"",entries:0,joined:""}}),J=function(e){function a(){var e;return Object(r.a)(this,a),(e=Object(c.a)(this,Object(m.a)(a).call(this))).loadUser=function(a){e.setState({user:{id:a.id,name:a.name,email:a.email,password:a.password,entries:a.entries,joined:a.joined}})},e.onInputChange=function(a){console.log(a),e.setState({input:a.target.value})},e.onSubmit=function(){console.log("onSubmit"),e.setState({imageURL:e.state.input}),""!==e.state.input&&fetch("https://"+window.location.hostname+"/api/analyzeimage",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageURL:e.state.input})}).then(function(e){return e.json()}).then(function(a){if("Error happened when calling the analyzeImage API"!==a){console.log("testing"),e.setState({keywords:a});var t="This image may contain the following elements:"+a.join();console.log(t),fetch("https://"+window.location.hostname+"/api/converttoaudio",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({keywords:t})}).then(function(e){return e.json()}).then(function(a){e.setState({audioURL:a})}).then(fetch("https://"+window.location.hostname+"/api/image",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.state.user.id})}).then(function(e){return e.json()}).then(function(a){e.setState(Object.assign(e.state.user,{entries:a}))}).catch(console.log))}else alert("Oops!! Seems it is not a public image or the format is not supported, please try again with other images :)"),e.setState({keywords:[]}),e.setState({audioURL:""})})},e.onRouteChange=function(a){"signin"===a&&e.setState(z),e.setState({route:a})},e.state=z,e}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(p,{route:this.state.route,onRouteChange:this.onRouteChange}),"home"===this.state.route?s.a.createElement("div",null,s.a.createElement(b,{name:this.state.user.name,entries:this.state.user.entries,isSignedIn:this.state.isSignedIn}),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"Row"},s.a.createElement(C,{imageURL:this.state.imageURL}),s.a.createElement(N,{className:"ImageLinkForm",onInputChange:this.onInputChange,onSubmit:this.onSubmit})),s.a.createElement("div",{className:"Row"},s.a.createElement(I,{className:"WordDisplay",imageURL:this.state.imageURL,keywords:this.state.keywords}),s.a.createElement(R,{className:"VoiceDisplay",imageURL:this.state.imageURL,audioURL:this.state.audioURL})))):"signin"===this.state.route?s.a.createElement("div",null,s.a.createElement(w,null),s.a.createElement(U,{loadUser:this.loadUser,onRouteChange:this.onRouteChange})):s.a.createElement("div",null,s.a.createElement(w,null),s.a.createElement(O,{loadUser:this.loadUser,onRouteChange:this.onRouteChange})),s.a.createElement(A,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},57:function(e,a,t){e.exports=t.p+"static/media/title.45ee4057.png"}},[[138,2,1]]]);
//# sourceMappingURL=main.4defba62.chunk.js.map